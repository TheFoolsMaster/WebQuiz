<!DOCTYPE html>
<html>
<head>
    <title>Quiz AFiBV</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<header>
    <img src="VistulaLogo.png"  alt="Logo AFiBV" id="VistulaLogo"></a>
</header>


<!-- quiz and instruction to refactor -->
<div id="quiz-container">
  <h1>Quiz AFiBV</h1>
  <div id="instructions">
    <h1>Instuctions</h1>
    <ol>
      <li>Click the "Start Quiz" button to begin the quiz.</li>
      <li>The first question will appear along with multiple-choice options. Read the question and the available options.</li>
      <li>Select the radio button next to the answer you think is correct.</li>
      <li>Click the Next button to proceed to the next question. If you want to go back to the previous question, click the Previous button.</li>
      <li>Repeat steps 4 and 5 for each question until you have answered all the questions.</li>
      <li>After answering all the questions, the quiz will automatically calculate your score and display the result.</li>
      <li>The result will show the number of correct answers and the overall percentage score. It will also indicate whether you have passed or failed based on a pass threshold of 75%.</li>
      <li>You can click the Show Correct Answers button to view the correct answers for all the questions.</li>
      <li>If you want to retry the quiz, click the Retry button. This will reset the quiz and allow you to answer the questions again.</li>
      <li>To download a certificate of completion, click the Download Certificate button. This will generate a PDF file containing your score and answers.</li>
      <li>Save the downloaded certificate for your records.</li>
      <li>You can close the web browser when you are finished with the quiz.</li>
    </ol>
    </div>
    <div id="quiz-features-container">
    <h1>Quiz Features:</h1>

    <h3>Start Quiz:</h3>
    <p>Clicking the "Start Quiz" button initiates the quiz.</p>

    <h3>Question Display:</h3>
    <p>The quiz displays one question at a time, along with multiple-choice options.</p>

    <h3>Answer Selection:</h3>
    <p>Users select the radio button next to the answer they believe is correct.</p>

    <h3>Navigation:</h3>
    <p>Users can navigate through the quiz by clicking the Next button to proceed to the next question. They can also click the Previous button to go back to the previous question.</p>

    <h3>Answering All Questions:</h3>
    <p>Users repeat steps 3 and 4 for each question until they have answered all the questions.</p>

    <h3>Automatic Scoring:</h3>
    <p>After answering all the questions, the quiz automatically calculates the user's score based on the number of correct answers.</p>

    <h3>Result Display:</h3>
    <p>The quiz displays the user's score as the number of correct answers and the overall percentage score. It also indicates whether the user has passed or failed based on a pass threshold of 75%.</p>

    <h3>Show Correct Answers:</h3>
    <p>Users can click the Show Correct Answers button to view the correct answers for all the questions.</p>

    <h3>Retry Quiz:</h3>
    <p>If users want to retry the quiz, they can click the Retry button. This resets the quiz, allowing users to answer the questions again.</p>

    <h3>Certificate Download:</h3>
    <p>To obtain a certificate of completion, users can click the Download Certificate button. This generates a PDF file containing the user's score and answers.</p>

    <h3>Saving Certificate:</h3>
    <p>Users are advised to save the downloaded certificate for their records.</p>

    <h3>Quiz Completion:</h3>
    <p>Users can close the web browser once they have finished the quiz. Overall, the quiz provides an interactive and dynamic experience where users can test their knowledge, receive immediate feedback, and obtain a completion certificate.</p>
  </div>

  
  <!-- start Quiz button -->
  <div class="start_btn"><button>Start Quiz</button></div>
  
    <div id="question-container">
        <h2 id="progress">Question:</h2>
        <p>Treść pytania</p>
        <input type="radio" name="answer" value="A"> Odpowiedź A<br>
        <input type="radio" name="answer" value="B"> Odpowiedź B<br>
        <input type="radio" name="answer" value="C"> Odpowiedź C<br>
        <input type="radio" name="answer" value="D"> Odpowiedź D<br>
        <button onclick="nextQuestion()">Next</button>
        <button onclick="previousQuestion()">Previous</button>
    </div>

    <div id="result-container" style="display: none;">
        <h2>Wynik:</h2>
        <p id="result"></p>
        <div id="answers-container"></div>
        <button onclick="showAnswers()" id="answers_btn">Show Correct Answers</button>
        <button onclick="retryQuiz()" id="retry_btn">Retry</button>
        <button onclick="downloadCertificate()" id="downloadCert_btn">Download Certificate</button>
    </div>
</div>

<script>
    var questions = [
        {
            question: "Who wrote book called 1984",
            answers: ["George  Orwell", "Stanley Parable", "Ray Bradbury", "Harper Lee"],
            correctAnswer: 1
        },
        {
            question: "What is the capital of France?",
            answers: ["Paris", "London", "Rome", "Berlin"],
            correctAnswer: 0
        },
        {
            question: "Which planet is known as the Red Planet?",
            answers: ["Venus", "Mars", "Jupiter", "Saturn"],
            correctAnswer: 1
        },
        {
            question: "Who painted the Mona Lisa?",
            answers: ["Leonardo da Vinci", "Vincent van Gogh", "Pablo Picasso", "Michelangelo"],
            correctAnswer: 0
        },
        {
            question: "What is the largest organ in the human body?",
            answers: ["Heart", "Brain", "Skin", "Liver"],
            correctAnswer: 2
        },
        {
            question: "Which country is famous for producing maple syrup?",
            answers: ["United States", "Canada", "Mexico", "Brazil"],
            correctAnswer: 1
        },
        {
            question: "Which animal is known as the 'King of the Jungle'?",
            answers: ["Elephant", "Lion", "Tiger", "Giraffe"],
            correctAnswer: 1
        },
        {
            question: "What is the chemical symbol for gold?",
            answers: ["Go", "Au", "Gd", "Ag"],
            correctAnswer: 1
        },
        {
            question: "Who wrote the novel 'Pride and Prejudice'?",
            answers: ["Jane Austen", "William Shakespeare", "Charles Dickens", "F. Scott Fitzgerald"],
            correctAnswer: 0
        },
        {
            question: "What is the tallest mountain in the world?",
            answers: ["Mount Everest", "K2", "Kangchenjunga", "Makalu"],
            correctAnswer: 0
        },
        {
            question: "Which year did World War II end?",
            answers: ["1943", "1944", "1945", "1946"],
            correctAnswer: 2
        },
        {
            question: "What is the chemical formula for water?",
            answers: ["CO2", "H2O", "NaCl", "O2"],
            correctAnswer: 1
        },
        {
            question: "Who is the author of 'To Kill a Mockingbird'?",
            answers: ["Harper Lee", "F. Scott Fitzgerald", "Mark Twain", "Ernest Hemingway"],
            correctAnswer: 0
        },
        {
            question: "Which country won the FIFA World Cup 2018?",
            answers: ["Brazil", "Germany", "France", "Spain"],
            correctAnswer: 2
        },
        {
            question: "What is the largest ocean on Earth?",
            answers: ["Indian Ocean", "Arctic Ocean", "Atlantic Ocean", "Pacific Ocean"],
            correctAnswer: 3
        },
        {
            question: "Who is the current CEO of Tesla?",
            answers: ["Jeff Bezos", "Elon Musk", "Tim Cook", "Satya Nadella"],
            correctAnswer: 1
        },
        {
            question: "Which artist painted the famous artwork 'The Starry Night'?",
            answers: ["Pablo Picasso", "Vincent van Gogh", "Leonardo da Vinci", "Salvador Dalí"],
            correctAnswer: 1
        },
        {
            question: "What is the currency of Japan?",
            answers: ["Yuan", "Pound", "Euro", "Yen"],
            correctAnswer: 3
        },
        {
            question: "What is the capital of Australia?",
            answers: ["Sydney", "Melbourne", "Canberra", "Brisbane"],
            correctAnswer: 2
        },
        {
            question: "Who wrote the play 'Hamlet'?",
            answers: ["William Shakespeare", "Arthur Miller", "Anton Chekhov", "Tennessee Williams"],
            correctAnswer: 0
        },
        {
            question: "What is the largest planet in our solar system?",
            answers: ["Earth", "Jupiter", "Saturn", "Neptune"],
            correctAnswer: 1
        },
        {
            question: "Which country is famous for the Great Wall?",
            answers: ["China", "Japan", "India", "South Korea"],
            correctAnswer: 0
        },
        {
            question: "Who discovered the theory of relativity?",
            answers: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Nikola Tesla"],
            correctAnswer: 1
        },
        {
            question: "What is the chemical symbol for oxygen?",
            answers: ["O", "H", "C", "N"],
            correctAnswer: 0
        },
        {
            question: "Which animal is known for its ability to mimic human speech?",
            answers: ["Dolphin", "Elephant", "Parrot", "Monkey"],
            correctAnswer: 2
        }
    ];

    var currentQuestion = 0;
    var score = 0;
    var selectedAnswers = Array(questions.length).fill(null);

    var startBtn = getQuerySelector('.start_btn');
    var instructions = getElementById('instructions');
    var quizfeaturescontainer = getElementById('quiz-features-container');
    var questionContainer = getElementById('question-container');
    var resultContainer = getElementById('result-container');
    var answerContainer = getElementById('answers-container');

    function displayQuestion() {
        var question = questions[currentQuestion];
        var questionText = questionContainer.getElementsByTagName("p")[0];
        var choices = questionContainer.getElementsByTagName("input");
        var progress = document.getElementById("progress");

        questionText.textContent = question.question;

        for (var i = 0; i < choices.length; i++) {
            choices[i].value = question.answers[i];
            choices[i].checked = false;
            choices[i].setAttribute("data-question", currentQuestion);
            choices[i].nextSibling.textContent = question.answers[i];
        }

        var selectedAnswer = selectedAnswers[currentQuestion];
        if (selectedAnswer !== null) {
            var selectedInput = questionContainer.querySelector(
            'input[value="' + selectedAnswer + '"]'
            );
            if (selectedInput !== null) {
            selectedInput.checked = true;
            }
        }

        progress.textContent = "Question " + (currentQuestion + 1) + " of " + questions.length;
    }


    function nextQuestion() {
        var selectedAnswer = document.querySelector('input[name="answer"]:checked');

        if (selectedAnswer === null) {
            alert("Wybierz odpowiedź!");
            return;
        }

        selectedAnswers[currentQuestion] = selectedAnswer.value;

        if (currentQuestion === questions.length - 1) {
            calculateScore();
            displayResult();
        } else {
            currentQuestion++;
            displayQuestion();
        }
    }

    function previousQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            displayQuestion();
        } else {
            alert("To jest pierwsze pytanie!");
        }
    }

    function calculateScore() {
        score = 0;
        for (var i = 0; i < questions.length; i++) {
            if (selectedAnswers[i] === questions[i].answers[questions[i].correctAnswer]) {
                score++;
            }
        }
    }

    function displayResult() {
        var resultText = document.getElementById("result");
        var scorePercentage = (score / questions.length) * 100;
        var passThreshold = 75;

        resultText.textContent = score + " / " + questions.length + " (" + scorePercentage + "%)";

        if (scorePercentage >= passThreshold) {
            resultText.textContent += " - PASS";
        } else {
            resultText.textContent += " - FAIL";
        }

        document.getElementById("question-container").style.display = "none";
        resultContainer.style.display = "block";
    }

    function showAnswers() {
        var answersContainer = document.getElementById("answers-container");
        answersContainer.style.display = 'block';
        answersContainer.innerHTML = '';

        for (var i = 0; i < questions.length; i++) {
            var question = questions[i];
            var questionNumber = i + 1;
            var userAnswer = selectedAnswers[i] || "";
            var correctAnswer = question.answers[question.correctAnswer];

            var answerText = document.createElement("p");
            answerText.textContent = "Pytanie " + questionNumber + ":";
            answersContainer.appendChild(answerText);

            var userAnswerText = document.createElement("p");
            userAnswerText.textContent = "Odpowiedź użytkownika: " + userAnswer;
            answersContainer.appendChild(userAnswerText);

            var correctAnswerText = document.createElement("p");
            correctAnswerText.textContent = "Poprawna odpowiedź: " + correctAnswer;
            answersContainer.appendChild(correctAnswerText);

            var separator = document.createElement("hr");
            answersContainer.appendChild(separator);
        }

        var resultContainer = document.getElementById("result-container");
        resultContainer.appendChild(answersContainer);
    }

    function retryQuiz() {
        currentQuestion = 0;
        score = 0;
        selectedAnswers = Array(questions.length).fill(null);
        displayQuestion();
        showStart();
        hideContainers();
    }

    function downloadCertificate() {
        const { jsPDF } = window.jspdf;
        var doc = new jsPDF();

        doc.setFontSize(20);
        doc.text('AFiBV QUIZ CERTIFICATE', 10, 20);
        doc.setFontSize(16);
        doc.text('Score: ' + score + ' / ' + questions.length, 10, 40);
        doc.setFontSize(12);

        for (var i = 0; i < questions.length; i++) {
            var question = questions[i];
            var questionNumber = i + 1;
            var userAnswer = selectedAnswers[i] || "";

            doc.text('Questions ' + questionNumber + ':', 10, 50 + i * 40);
            doc.text('User answers: ' + userAnswer, 10, 60 + i * 40);
            doc.text('Correct answers: ' + question.answers[question.correctAnswer], 10, 70 + i * 40);
        }

        var certificateFile = doc.output();
        var link = document.createElement('a');
        link.href = 'data:application/pdf;base64,' + btoa(certificateFile);
        link.download = 'certificate.pdf';

        document.body.appendChild(link);
        link.click();

        document.body.removeChild(link);
    }

    function getElementById(id) {
  return document.getElementById(id);
}

function getQuerySelector(selector) {
  return document.querySelector(selector);
}

function hideElement(element) {
  element.style.display = 'none';
}

function showElement(element) {
  element.style.display = 'block';
}

function startQuiz() {

  hideElement(startBtn);
  hideElement(instructions);
  hideElement(quizfeaturescontainer);
  showElement(questionContainer);

  displayQuestion();
}

function showStart() {

  showElement(quizfeaturescontainer);
  showElement(startBtn);
  showElement(instructions);
}

function hideContainers() {

  hideElement(questionContainer);
  hideElement(resultContainer);
  hideElement(answerContainer);
}


function showContainers() {

  showElement(questionContainer);
  showElement(resultContainer);
}
    hideContainers();
    document.querySelector('.start_btn button').addEventListener('click', startQuiz);
  </script>
</body>
</html>
